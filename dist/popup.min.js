function Popup(){"use strict";function e(e,s){if(r.indexOf(e)===-1)return console.error('请输入合法的"show(arg)",arg可选"confirm" "success" "failure" "loading"'),!1;s=s||{},p.getElementsByClassName("popup-"+e)[0]||t(e),s.text&&(m[e].text=s.text),s.maskColor&&(m[e].maskColor=s.maskColor),u.style.backgroundColor=m[e].maskColor,n();var a=p.getElementsByClassName("popup-"+e)[0],l=a.getElementsByClassName("text")[0];if(l.textContent=m[e].text,"confirm"===e){s.buttonReverse&&(m.confirm.buttonReverse=s.buttonReverse);var i=a.getElementsByClassName("button");m.confirm.buttonReverse?(i[0].style.float="right",i[1].style.float="left"):(i[0].style.float="left",i[1].style.float="right");var c=a.getElementsByClassName("yes")[0],d=a.getElementsByClassName("no")[0];o(c,s.success,m.confirm.success),o(d,s.failure,m.confirm.failure)}"loading"===e?(s.timeout&&(m.loading.timeout=s.timeout),setTimeout(function(){n()},m.loading.timeout)):s.timeout&&setTimeout(function(){n()},s.timeout),a.style.display="block",p.style.display="block"}function t(e){var t=document.createElement("div");t.classList.add("popup-item","popup-"+e),t.innerHTML=c[e],p.appendChild(t)}function o(e,t,o){s(t)?e.onclick=function(){o(),t()}:e.onclick=o}function s(e){return"[object Function]"===Object.prototype.toString.call(e)}function n(){var e=p.getElementsByClassName("popup-item");p.style.display="none";for(var t=0,o=e.length;t<o;t++)e[t].style.display="none"}var a=document.getElementById("popup-box")||document.getElementsByClassName("popup-box")[0];if(a)console.warn('请删除HTML中的"#popup-box"和".popup-box"元素,否则会出现意想不到的BUG');else{var l=document.createElement("div"),i=document.createElement("div");l.setAttribute("id","popup-box"),l.classList.add("popup-box"),i.classList.add("popup-mask"),l.appendChild(i),document.getElementsByTagName("body")[0].appendChild(l)}var c={confirm:'<div class="confirm-text"><p class="text"></p></div><div class="confirm-button clear-fix">    <button class="button no">取消</button>    <button class="button yes">确定</button></div>',loading:'<span class="icon loading"></span><p class="text"></p>',success:'<span class="icon"></span><p class="text"></p>',failure:'<span class="icon"></span><p class="text"></p>'},p=document.getElementById("popup-box"),u=p.getElementsByClassName("popup-mask")[0],r=["confirm","loading","success","failure"],m={confirm:{maskColor:"rgba(67, 67, 67, 0.5)",text:"解绑后将无法收到该设备的任何消息。您确定要解绑吗?",buttonReverse:!1,success:function(){var e=p.getElementsByClassName("popup-confirm")[0];p.style.display="none",e.style.display="none",console.log("click success")},failure:function(){var e=p.getElementsByClassName("popup-confirm")[0];p.style.display="none",e.style.display="none",console.log("click failure")}},loading:{maskColor:"transparent",text:"解绑中...",timeout:"2000"},success:{maskColor:"transparent",text:"该设备已解除绑定"},failure:{maskColor:"transparent",text:"该设备解绑失败 请重试"}},d=function(e){e.preventDefault(),e.stopPropagation()},f=function(e){e.stopPropagation()};return u.addEventListener("touchmove",d,!1),u.addEventListener("touchstart",f,!1),u.addEventListener("touchend",f,!1),u.addEventListener("click",f,!1),{show:function(t,o){e(t,o)},close:function(){n()}}}